<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Multi-Utility Tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind Theme -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#0f172a', /* dark blue */
            secondary: '#1e293b',
            accent: '#3b82f6'
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            }
          }
        }
      }
    }
  </script>
  
  <style>
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
    
    /* Button Styles */
    .btn {
      @apply bg-accent text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 hover:bg-blue-700 active:scale-95;
    }
    
    .btn-secondary {
      @apply bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 hover:bg-gray-700 active:scale-95;
    }
    
    /* Input Styles */
    .input-field {
      @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent outline-none transition;
    }
    
    /* Card Hover Effect */
    .tool-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    /* Modal Animation */
    .modal-content {
      animation: slideUp 0.3s ease-out;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 min-h-screen">
<!-- ================= NAVBAR ================= -->
<nav class="bg-primary text-white p-4 sticky top-0 z-50 shadow-lg">
  <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
    <div class="flex items-center gap-3">
      <div class="text-3xl">ðŸ”§</div>
      <div>
        <h1 class="text-xl font-bold">Multi-Utility Tools</h1>
        <p class="text-sm text-gray-300">20+ useful tools in one place</p>
      </div>
    </div>
    
    <div class="relative w-full md:w-auto">
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <i class="fas fa-search text-gray-400"></i>
      </div>
      <input
        id="search"
        type="text"
        placeholder="Search tools..."
        class="pl-10 pr-4 py-2 rounded-lg text-black w-full md:w-64 focus:ring-2 focus:ring-accent focus:outline-none"
        onkeyup="filterTools()"
      />
    </div>
  </div>
</nav>

<!-- ================= DASHBOARD ================= -->
<main class="max-w-7xl mx-auto p-4">
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-primary mb-2">All Tools</h2>
    <p class="text-gray-600">Click on any tool to start using it</p>
  </div>
  
  <div id="toolGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
    <!-- Tool cards generated by JS -->
  </div>
  
  <div id="noResults" class="hidden text-center py-10">
    <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
    <h3 class="text-xl font-semibold text-gray-600 mb-2">No tools found</h3>
    <p class="text-gray-500">Try searching with different keywords</p>
  </div>
</main>

<!-- ================= MODAL ================= -->
<div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-xl w-full max-w-2xl modal-content max-h-[90vh] overflow-hidden flex flex-col">
    <div class="flex justify-between items-center p-5 border-b bg-primary text-white rounded-t-xl">
      <h2 id="modalTitle" class="text-xl font-semibold"></h2>
      <button onclick="closeModal()" class="text-2xl hover:text-gray-300 transition">Ã—</button>
    </div>
    
    <div id="modalContent" class="p-5 overflow-y-auto flex-grow">
      <!-- Content will be loaded here -->
    </div>
    
    <div class="p-4 border-t flex justify-end">
      <button onclick="closeModal()" class="btn-secondary">Close</button>
    </div>
  </div>
</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
/* ================= TOOL LIST WITH ICONS ================= */
const tools = [
  { name: "Age Calculator", icon: "ðŸŽ‚", color: "bg-red-100" },
  { name: "Word Counter", icon: "ðŸ“", color: "bg-blue-100" },
  { name: "Password Generator", icon: "ðŸ”", color: "bg-green-100" },
  { name: "BMI Calculator", icon: "âš–ï¸", color: "bg-purple-100" },
  { name: "GST Calculator", icon: "ðŸ’°", color: "bg-yellow-100" },
  { name: "Unit Converter", icon: "ðŸ“", color: "bg-indigo-100" },
  { name: "Percentage Calculator", icon: "ðŸ“Š", color: "bg-pink-100" },
  { name: "QR Code Generator", icon: "ðŸ“±", color: "bg-teal-100" },
  { name: "Loan EMI Calculator", icon: "ðŸ¦", color: "bg-orange-100" },
  { name: "Case Converter", icon: "ðŸ” ", color: "bg-cyan-100" },
  { name: "Stopwatch", icon: "â±ï¸", color: "bg-lime-100" },
  { name: "Morse Code Converter", icon: "ðŸ“Ÿ", color: "bg-amber-100" },
  { name: "Temperature Converter", icon: "ðŸŒ¡ï¸", color: "bg-rose-100" },
  { name: "Binary to Decimal", icon: "ðŸ”¢", color: "bg-violet-100" },
  { name: "Random Number Picker", icon: "ðŸŽ²", color: "bg-sky-100" },
  { name: "Tip Calculator", icon: "ðŸ’¸", color: "bg-emerald-100" },
  { name: "Days Counter", icon: "ðŸ“…", color: "bg-fuchsia-100" },
  { name: "Text to Speech", icon: "ðŸ”Š", color: "bg-stone-100" },
  { name: "Lorem Ipsum Generator", icon: "ðŸ“„", color: "bg-neutral-100" },
  { name: "Privacy Policy Generator", icon: "ðŸ›¡ï¸", color: "bg-slate-100" }
];

/* ================= STATE MANAGEMENT ================= */
const appState = {
  stopwatchInterval: null,
  stopwatchTime: 0,
  stopwatchRunning: false,
  morseCodeMap: {
    'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---',
    'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
    'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..',
    '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.',
    '.': '.-.-.-', ',': '--..--', '?': '..--..', "'": '.----.', '!': '-.-.--', '/': '-..-.', '(': '-.--.', ')': '-.--.-', '&': '.-...',
    ':': '---...', ';': '-.-.-.', '=': '-...-', '+': '.-.-.', '-': '-....-', '_': '..--.-', '"': '.-..-.', '$': '...-..-', '@': '.--.-.', ' ': '/'
  }
};

/* ================= INITIALIZE TOOL CARDS ================= */
function initToolCards() {
  const grid = document.getElementById("toolGrid");
  grid.innerHTML = '';
  
  tools.forEach(tool => {
    const card = document.createElement("div");
    card.className = `tool-card ${tool.color} rounded-xl shadow p-4 cursor-pointer flex flex-col items-center justify-center animate-fade-in`;
    card.dataset.name = tool.name.toLowerCase();
    card.innerHTML = `
      <div class="text-4xl mb-3">${tool.icon}</div>
      <h3 class="font-semibold text-center text-gray-800">${tool.name}</h3>
    `;
    card.onclick = () => openTool(tool.name);
    grid.appendChild(card);
  });
}

/* ================= SEARCH FUNCTIONALITY ================= */
function filterTools() {
  const val = document.getElementById("search").value.toLowerCase().trim();
  const cards = document.querySelectorAll(".tool-card");
  const noResults = document.getElementById("noResults");
  
  let visibleCount = 0;
  
  cards.forEach(card => {
    const shouldShow = card.dataset.name.includes(val);
    card.style.display = shouldShow ? "flex" : "none";
    if (shouldShow) visibleCount++;
  });
  
  noResults.style.display = visibleCount === 0 ? "block" : "none";
}

/* ================= MODAL HANDLER ================= */
function openModal(title, content) {
  document.getElementById("modalTitle").innerText = title;
  document.getElementById("modalContent").innerHTML = content;
  document.getElementById("modal").classList.remove("hidden");
  document.getElementById("modal").classList.add("flex");
  document.body.style.overflow = "hidden";
}

function closeModal() {
  // Stop any running timers
  if (appState.stopwatchInterval) {
    clearInterval(appState.stopwatchInterval);
    appState.stopwatchRunning = false;
  }
  
  document.getElementById("modal").classList.add("hidden");
  document.body.style.overflow = "auto";
}

/* ================= TOOL FUNCTIONS ================= */
function openTool(tool) {
  switch(tool) {
    case "Age Calculator":
      ageCalculator();
      break;
    case "Word Counter":
      wordCounter();
      break;
    case "Password Generator":
      passwordGenerator();
      break;
    case "BMI Calculator":
      bmiCalculator();
      break;
    case "GST Calculator":
      gstCalculator();
      break;
    case "Unit Converter":
      unitConverter();
      break;
    case "Percentage Calculator":
      percentageCalculator();
      break;
    case "QR Code Generator":
      qrCodeGenerator();
      break;
    case "Loan EMI Calculator":
      loanEMICalculator();
      break;
    case "Case Converter":
      caseConverter();
      break;
    case "Stopwatch":
      stopwatch();
      break;
    case "Morse Code Converter":
      morseCodeConverter();
      break;
    case "Temperature Converter":
      temperatureConverter();
      break;
    case "Binary to Decimal":
      binaryToDecimal();
      break;
    case "Random Number Picker":
      randomNumberPicker();
      break;
    case "Tip Calculator":
      tipCalculator();
      break;
    case "Days Counter":
      daysCounter();
      break;
    case "Text to Speech":
      textToSpeech();
      break;
    case "Lorem Ipsum Generator":
      loremIpsumGenerator();
      break;
    case "Privacy Policy Generator":
      privacyPolicyGenerator();
      break;
    default:
      openModal(tool, `<p>Tool coming soon!</p>`);
  }
}

/* ================= INDIVIDUAL TOOL IMPLEMENTATIONS ================= */

function ageCalculator() {
  openModal("Age Calculator", `
    <div class="space-y-4">
      <div>
        <label class="block text-gray-700 mb-2">Date of Birth</label>
        <input type="date" id="dob" class="input-field" max="${new Date().toISOString().split('T')[0]}">
      </div>
      
      <div>
        <label class="block text-gray-700 mb-2">Calculate Age As Of (Optional)</label>
        <input type="date" id="asOfDate" class="input-field" value="${new Date().toISOString().split('T')[0]}">
      </div>
      
      <button onclick="calculateAge()" class="btn w-full">Calculate Age</button>
      
      <div id="ageResult" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
        <h3 class="font-semibold text-lg mb-2">Your Age</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="text-center p-3 bg-white rounded shadow">
            <div id="years" class="text-3xl font-bold text-accent">0</div>
            <div class="text-gray-600">Years</div>
          </div>
          <div class="text-center p-3 bg-white rounded shadow">
            <div id="months" class="text-3xl font-bold text-accent">0</div>
            <div class="text-gray-600">Months</div>
          </div>
          <div class="text-center p-3 bg-white rounded shadow">
            <div id="days" class="text-3xl font-bold text-accent">0</div>
            <div class="text-gray-600">Days</div>
          </div>
          <div class="text-center p-3 bg-white rounded shadow">
            <div id="totalDays" class="text-3xl font-bold text-accent">0</div>
            <div class="text-gray-600">Total Days</div>
          </div>
        </div>
      </div>
    </div>
  `);
}

function calculateAge() {
  const dob = document.getElementById('dob').value;
  const asOfDate = document.getElementById('asOfDate').value;
  
  if (!dob) {
    alert("Please select your date of birth");
    return;
  }
  
  const dobDate = new Date(dob);
  const asOf = new Date(asOfDate || new Date());
  
  if (dobDate > asOf) {
    alert("Date of birth cannot be in the future");
    return;
  }
  
  let years = asOf.getFullYear() - dobDate.getFullYear();
  let months = asOf.getMonth() - dobDate.getMonth();
  let days = asOf.getDate() - dobDate.getDate();
  
  if (days < 0) {
    months--;
    // Get days in previous month
    const prevMonth = new Date(asOf.getFullYear(), asOf.getMonth(), 0);
    days += prevMonth.getDate();
  }
  
  if (months < 0) {
    years--;
    months += 12;
  }
  
  // Calculate total days
  const timeDiff = asOf - dobDate;
  const totalDays = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
  
  document.getElementById('years').textContent = years;
  document.getElementById('months').textContent = months;
  document.getElementById('days').textContent = days;
  document.getElementById('totalDays').textContent = totalDays;
  document.getElementById('ageResult').classList.remove('hidden');
}

function wordCounter() {
  openModal("Word Counter", `
    <div class="space-y-4">
      <div>
        <label class="block text-gray-700 mb-2">Enter your text</label>
        <textarea id="wordText" class="input-field h-40" placeholder="Type or paste your text here..."></textarea>
      </div>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="text-center p-4 bg-blue-50 rounded-lg">
          <div class="text-2xl font-bold text-accent" id="wordCount">0</div>
          <div class="text-gray-600">Words</div>
        </div>
        <div class="text-center p-4 bg-green-50 rounded-lg">
          <div class="text-2xl font-bold text-accent" id="charCount">0</div>
          <div class="text-gray-600">Characters</div>
        </div>
        <div class="text-center p-4 bg-purple-50 rounded-lg">
          <div class="text-2xl font-bold text-accent" id="charNoSpace">0</div>
          <div class="text-gray-600">Chars (no spaces)</div>
        </div>
        <div class="text-center p-4 bg-yellow-50 rounded-lg">
          <div class="text-2xl font-bold text-accent" id="sentenceCount">0</div>
          <div class="text-gray-600">Sentences</div>
        </div>
      </div>
      
      <div>
        <h3 class="font-semibold mb-2">Reading Time</h3>
        <div class="grid grid-cols-2 gap-4">
          <div class="text-center p-3 bg-gray-50 rounded">
            <div class="text-xl font-bold" id="readingTime">0 min</div>
            <div class="text-gray-600">Average (200 WPM)</div>
          </div>
          <div class="text-center p-3 bg-gray-50 rounded">
            <div class="text-xl font-bold" id="speakingTime">0 min</div>
            <div class="text-gray-600">Speaking (130 WPM)</div>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      const wordText = document.getElementById('wordText');
      
      function updateCounts() {
        const text = wordText.value;
        
        // Word count (filter out empty strings)
        const words = text.trim().split(/\\s+/).filter(word => word.length > 0);
        document.getElementById('wordCount').textContent = words.length;
        
        // Character counts
        document.getElementById('charCount').textContent = text.length;
        document.getElementById('charNoSpace').textContent = text.replace(/\\s+/g, '').length;
        
        // Sentence count (simple approximation)
        const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
        document.getElementById('sentenceCount').textContent = sentences.length;
        
        // Reading time calculations
        const readingTime = words.length / 200; // 200 words per minute
        const speakingTime = words.length / 130; // 130 words per minute
        
        document.getElementById('readingTime').textContent = readingTime < 1 ? 
          '< 1 min' : readingTime.toFixed(1) + ' min';
        document.getElementById('speakingTime').textContent = speakingTime < 1 ? 
          '< 1 min' : speakingTime.toFixed(1) + ' min';
      }
      
      wordText.addEventListener('input', updateCounts);
      
      // Initialize with any existing text
      updateCounts();
    <\/script>
  `);
}

function passwordGenerator() {
  openModal("Password Generator", `
    <div class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-700 mb-2">Password Length</label>
          <input type="range" id="lengthSlider" min="6" max="32" value="12" class="w-full">
          <div class="flex justify-between">
            <span>6</span>
            <span id="lengthValue" class="font-bold">12</span>
            <span>32</span>
          </div>
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Generated Password</label>
          <div class="flex gap-2">
            <input type="text" id="passwordOutput" class="input-field flex-grow" readonly>
            <button onclick="copyPassword()" class="btn-secondary whitespace-nowrap">
              <i class="fas fa-copy"></i>
            </button>
          </div>
        </div>
      </div>
      
      <div>
        <h3 class="font-semibold mb-2">Include Characters</h3>
        <div class="grid grid-cols-2 gap-3">
          <label class="flex items-center">
            <input type="checkbox" id="uppercase" class="mr-2" checked> Uppercase Letters (A-Z)
          </label>
          <label class="flex items-center">
            <input type="checkbox" id="lowercase" class="mr-2" checked> Lowercase Letters (a-z)
          </label>
          <label class="flex items-center">
            <input type="checkbox" id="numbers" class="mr-2" checked> Numbers (0-9)
          </label>
          <label class="flex items-center">
            <input type="checkbox" id="symbols" class="mr-2"> Symbols (!@#$%^&*)
          </label>
        </div>
      </div>
      
      <div class="flex gap-2">
        <button onclick="generatePassword()" class="btn flex-grow">
          <i class="fas fa-sync-alt mr-2"></i> Generate Password
        </button>
        <button onclick="generateMultiple()" class="btn-secondary">
          <i class="fas fa-list mr-2"></i> Generate 5
        </button>
      </div>
      
      <div id="multiplePasswords" class="hidden space-y-2">
        <h3 class="font-semibold">Multiple Passwords</h3>
        <!-- Will be filled by JavaScript -->
      </div>
      
      <div class="mt-4 p-3 bg-gray-50 rounded">
        <h4 class="font-semibold mb-1">Password Strength</h4>
        <div class="flex items-center gap-2">
          <div id="strengthBar" class="h-2 flex-grow bg-gray-300 rounded overflow-hidden">
            <div id="strengthFill" class="h-full bg-red-500 w-0"></div>
          </div>
          <span id="strengthText" class="font-medium">Weak</span>
        </div>
      </div>
    </div>
    
    <script>
      const lengthSlider = document.getElementById('lengthSlider');
      const lengthValue = document.getElementById('lengthValue');
      
      lengthSlider.addEventListener('input', function() {
        lengthValue.textContent = this.value;
      });
      
      function generatePassword() {
        const length = parseInt(lengthSlider.value);
        const uppercase = document.getElementById('uppercase').checked;
        const lowercase = document.getElementById('lowercase').checked;
        const numbers = document.getElementById('numbers').checked;
        const symbols = document.getElementById('symbols').checked;
        
        if (!uppercase && !lowercase && !numbers && !symbols) {
          alert("Please select at least one character type");
          return;
        }
        
        let charset = '';
        if (uppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        if (lowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
        if (numbers) charset += '0123456789';
        if (symbols) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
        
        let password = '';
        for (let i = 0; i < length; i++) {
          const randomIndex = Math.floor(Math.random() * charset.length);
          password += charset[randomIndex];
        }
        
        document.getElementById('passwordOutput').value = password;
        updatePasswordStrength(password);
      }
      
      function generateMultiple() {
        const container = document.getElementById('multiplePasswords');
        container.innerHTML = '';
        container.classList.remove('hidden');
        
        for (let i = 0; i < 5; i++) {
          generatePassword();
          const password = document.getElementById('passwordOutput').value;
          
          const div = document.createElement('div');
          div.className = 'flex gap-2 items-center';
          div.innerHTML = \`
            <input type="text" value="\${password}" class="input-field flex-grow" readonly>
            <button onclick="copyToClipboard('\${password}')" class="btn-secondary">
              <i class="fas fa-copy"></i>
            </button>
          \`;
          container.appendChild(div);
        }
      }
      
      function copyPassword() {
        const password = document.getElementById('passwordOutput').value;
        if (password) {
          copyToClipboard(password);
        }
      }
      
      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          alert('Password copied to clipboard!');
        });
      }
      
      function updatePasswordStrength(password) {
        let strength = 0;
        
        // Length check
        if (password.length >= 8) strength += 1;
        if (password.length >= 12) strength += 1;
        if (password.length >= 16) strength += 1;
        
        // Character variety checks
        if (/[A-Z]/.test(password)) strength += 1;
        if (/[a-z]/.test(password)) strength += 1;
        if (/[0-9]/.test(password)) strength += 1;
        if (/[^A-Za-z0-9]/.test(password)) strength += 2;
        
        const strengthBar = document.getElementById('strengthFill');
        const strengthText = document.getElementById('strengthText');
        
        if (strength <= 3) {
          strengthBar.style.width = '25%';
          strengthBar.style.backgroundColor = '#ef4444';
          strengthText.textContent = 'Weak';
        } else if (strength <= 5) {
          strengthBar.style.width = '50%';
          strengthBar.style.backgroundColor = '#f59e0b';
          strengthText.textContent = 'Fair';
        } else if (strength <= 7) {
          strengthBar.style.width = '75%';
          strengthBar.style.backgroundColor = '#3b82f6';
          strengthText.textContent = 'Good';
        } else {
          strengthBar.style.width = '100%';
          strengthBar.style.backgroundColor = '#10b981';
          strengthText.textContent = 'Strong';
        }
      }
      
      // Generate initial password
      generatePassword();
    <\/script>
  `);
}

function bmiCalculator() {
  openModal("BMI Calculator", `
    <div class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-700 mb-2">Height (cm)</label>
          <input type="number" id="height" class="input-field" placeholder="e.g., 175" min="50" max="250">
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2">Weight (kg)</label>
          <input type="number" id="weight" class="input-field" placeholder="e.g., 70" min="20" max="200">
        </div>
      </div>
      
      <button onclick="calculateBMI()" class="btn w-full">Calculate BMI</button>
      
      <div id="bmiResult" class="hidden mt-6">
        <div class="text-center mb-6">
          <div class="text-4xl font-bold text-accent" id="bmiValue">0</div>
          <div class="text-gray-600">Your BMI</div>
        </div>
        
        <div class="mb-4">
          <div class="flex justify-between mb-1">
            <span>Underweight</span>
            <span>Normal</span>
            <span>Overweight</span>
            <span>Obese</span>
          </div>
          <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
            <div id="bmiIndicator" class="h-full bg-accent w-0"></div>
          </div>
          <div class="flex justify-between text-xs text-gray-500 mt-1">
            <span>â‰¤18.5</span>
            <span>18.5-25</span>
            <span>25-30</span>
            <span>â‰¥30</span>
          </div>
        </div>
        
        <div id="bmiCategory" class="p-3 rounded-lg text-center font-semibold">
          <!-- Category will be inserted here -->
        </div>
        
        <div class="mt-4 p-3 bg-gray-50 rounded">
          <h4 class="font-semibold mb-2">Healthy Weight Range</h4>
          <p id="healthyRange" class="text-gray-700"></p>
        </div>
      </div>
    </div>
    
    <script>
      function calculateBMI() {
        const height = parseFloat(document.getElementById('height').value) / 100; // Convert to meters
        const weight = parseFloat(document.getElementById('weight').value);
        
        if (!height || !weight || height <= 0 || weight <= 0) {
          alert("Please enter valid height and weight values");
          return;
        }
        
        const bmi = weight / (height * height);
        const roundedBMI = bmi.toFixed(1);
        
        document.getElementById('bmiValue').textContent = roundedBMI;
        
        // Determine category and color
        let category = '';
        let color = '';
        let indicatorPosition = 0;
        
        if (bmi < 18.5) {
          category = 'Underweight';
          color = 'bg-blue-500 text-white';
          indicatorPosition = (bmi / 18.5) * 25;
        } else if (bmi < 25) {
          category = 'Normal weight';
          color = 'bg-green-500 text-white';
          indicatorPosition = 25 + ((bmi - 18.5) / 6.5) * 25;
        } else if (bmi < 30) {
          category = 'Overweight';
          color = 'bg-yellow-500 text-white';
          indicatorPosition = 50 + ((bmi - 25) / 5) * 25;
        } else {
          category = 'Obese';
          color = 'bg-red-500 text-white';
          indicatorPosition = 75 + Math.min(((bmi - 30) / 20) * 25, 25);
        }
        
        // Update indicator position
        document.getElementById('bmiIndicator').style.width = Math.min(indicatorPosition, 100) + '%';
        
        // Update category display
        const categoryDiv = document.getElementById('bmiCategory');
        categoryDiv.className = \`p-3 rounded-lg text-center font-semibold \${color}\`;
        categoryDiv.textContent = category;
        
        // Calculate healthy weight range
        const minHealthy = (18.5 * height * height).toFixed(1);
        const maxHealthy = (25 * height * height).toFixed(1);
        document.getElementById('healthyRange').textContent = 
          \`For your height, a healthy weight range is between \${minHealthy} kg and \${maxHealthy} kg.\`;
        
        // Show result
        document.getElementById('bmiResult').classList.remove('hidden');
      }
    <\/script>
  `);
}

function gstCalculator() {
  openModal("GST Calculator", `
    <div class="space-y-4">
      <div>
        <label class="block text-gray-700 mb-2">Original Amount (â‚¹)</label>
        <input type="number" id="amount" class="input-field" placeholder="e.g., 1000">
      </div>
      
      <div>
        <label class="block text-gray-700 mb-2">GST Rate (%)</label>
        <div class="flex gap-2 mb-2">
          <button onclick="setGSTRate(5)" class="btn-secondary flex-grow">5%</button>
          <button onclick="setGSTRate(12)" class="btn-secondary flex-grow">12%</button>
          <button onclick="setGSTRate(18)" class="btn-secondary flex-grow">18%</button>
          <button onclick="setGSTRate(28)" class="btn-secondary flex-grow">28%</button>
        </div>
        <input type="number" id="gstRate" class="input-field" value="18" min="0" max="100">
      </div>
      
      <div class="flex gap-2">
        <button onclick="calculateGST('add')" class="btn flex-grow">Calculate GST (Add)</button>
        <button onclick="calculateGST('remove')" class="btn-secondary flex-grow">Remove GST</button>
      </div>
      
      <div id="gstResult" class="hidden space-y-3 mt-4">
        <div class="grid grid-cols-2 gap-3">
          <div class="p-3 bg-blue-50 rounded">
            <div class="text-sm text-gray-600">Original Amount</div>
            <div class="text-xl font-bold" id="originalAmount">â‚¹0</div>
          </div>
          <div class="p-3 bg-green-50 rounded">
            <div class="text-sm text-gray-600">GST Amount</div>
            <div class="text-xl font-bold" id="gstAmount">â‚¹0</div>
          </div>
        </div>
        
        <div class="p-4 bg-accent text-white rounded-lg">
          <div class="text-sm">Final Amount</div>
          <div class="text-2xl font-bold" id="finalAmount">â‚¹0</div>
        </div>
        
        <div class="text-sm text-gray-600">
          GST Rate: <span id="displayRate">18</span>%
        </div>
      </div>
    </div>
    
    <script>
      function setGSTRate(rate) {
        document.getElementById('gstRate').value = rate;
      }
      
      function calculateGST(type) {
        const amount = parseFloat(document.getElementById('amount').value);
        const rate = parseFloat(document.getElementById('gstRate').value);
        
        if (!amount || amount <= 0)
